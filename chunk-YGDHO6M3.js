import{a as N}from"./chunk-6ZT7OVEF.js";import{c as A}from"./chunk-5DBK4ZXR.js";import"./chunk-7IPKTMG7.js";import"./chunk-23ETMDCW.js";import{w as R}from"./chunk-FQU4EXR4.js";import"./chunk-7GNHLM6X.js";import{$ as w,ba as k}from"./chunk-FLJC444F.js";import{d as f,f as y,m as M,q as x,r as D}from"./chunk-IPZIKDLO.js";import{t as P}from"./chunk-TBJJFKUM.js";import{Fc as F,Gb as u,Qb as m,Rb as a,Sb as h,Wb as C,Yb as E,Zb as l,a as _,ad as T,b,ib as p,jc as g,kd as O,nb as c,qa as d,ra as s,ub as I,zb as S}from"./chunk-4KZPWME3.js";function L(n,t){n&1&&(m(0,"div"),h(1,"app-skeleton-loader",7),a())}function V(n,t){if(n&1){let r=C();m(0,"div")(1,"app-dynamic-form",8),E("uploadfile",function(e){d(r);let i=l();return s(i.uploadFiles(e))})("deletefile",function(e){d(r);let i=l();return s(i.deleteFile(e))})("formSubmit",function(e){d(r);let i=l();return s(i.submitForm(e))})("imageReorder",function(e){d(r);let i=l();return s(i.onImageReorder(e))}),a()()}if(n&2){let r=l();p(),u("fields",r.fields)("columns",r.columns)}}var q=class n{constructor(t,r,o,e){this.commonService=t;this.toasterService=r;this.loaderService=o;this.cdr=e}form;options=[{Id:1,Name:"Option One"},{Id:2,Name:"Option Two"},{Id:3,Name:"Option Three"},{Id:1,Name:"Option One"},{Id:1,Name:"Option One"},{Id:1,Name:"Option Three"},{Id:1,Name:"Option One"}];level=[{value:1,label:"Junior level"},{value:2,label:"Mid level"},{value:3,label:"Senior level"}];columns;selectedFiles;mediaType="Image";propertyId=554;fields=[{type:"file",id:"file",label:"Add Property Image",name:"Image",value:[],fileType:[f.IMAGE_PNG,f.IMAGE_JPEG],multiple:!0,note:"Ensure your logos are 100px by 100px",wrapperClass:"col-md-12",reorder:!0,preview:!0},{type:"file",id:"brochure",label:"Brochure",name:"Brochure",fileType:[f.PDF],multiple:!1,reorder:!1,wrapperClass:"col-md-12"},{placeholder:"Please select date",type:"date",name:"Dob",label:"Select Date",format:M.DATE_FORMAT_2}];isLoaded=!1;loadingSkeleton=!0;ngOnInit(){this.getImage()}getImage(){let t=`${y.PROPERTY_DETAIL}/${this.propertyId}`;return this.commonService.get(t).subscribe({next:r=>{let o=r.data?.media;this.fields=this.fields.map(e=>b(_({},e),{value:o[e.name]??""})),this.columns=[{id:"col-12",value:this.fields}],this.isLoaded=!0,this.loadingSkeleton=!1,this.cdr.markForCheck()},complete:()=>{},error:()=>{this.loadingSkeleton=!1}}),!0}uploadFiles(t){this.selectedFiles=[...t.fileList];for(let r=0;r<this.selectedFiles.length;r++){let o={File:this.selectedFiles[r],Type:this.mediaType};this.upload(o,t.controlname)}}upload(t,r){this.loaderService.show();let o=new FormData;o.append(x.PROPERTY_ID,"554"),Object.keys(t).forEach(e=>{typeof t[e]=="object"&&t[e]!=""&&o.append(e,t[e],t[e].name)}),o.append("Type",r),this.commonService.post("property/uploadfile",o).subscribe({next:e=>{this.toasterService.success(e.message),this.fields.forEach(i=>{if(i.name==r){let v={Id:e.data.PropertyMediaId,Name:e.data.Name,Url:e.data.Url,MediaType:e.data.MediaType};r=="Image"?i.value.push(v):i.value=v}}),this.cdr.markForCheck(),this.loaderService.hide()},complete:()=>{this.loaderService.hide()},error:()=>{this.loaderService.hide()}})}deleteFile(t){if(t?.data?.Id){this.loaderService.show();let r=t.data?.Id;this.commonService.delete(`${y.PROPERTY_DELETE_FILE}/${r}`).subscribe({next:o=>{this.loaderService.hide(),this.toasterService.success(o.message),t.controlname&&this.fields.forEach(e=>{e.name==t.controlname&&(Array.isArray(e.value)?e.value=e.value.filter(i=>i.Id!=r):e.value=[]),this.cdr.markForCheck()})},error:o=>{this.loaderService.hide()}})}}onImageReorder(t){this.loaderService.show();let r=this.createImageReorderPayload(t),o=y.PROPERTY_MEDIA_REORDER;this.commonService.post(o,r).subscribe({next:e=>{this.loaderService.hide()},error:e=>{this.loaderService.hide()}})}createImageReorderPayload(t){let r={PropertyId:this.propertyId,Media:[]};return r.Media=t.map((o,e)=>({Position:e+1,PropertyMediaId:o.Id})),r}submitForm(t){console.log(t)}static \u0275fac=function(r){return new(r||n)(c(k),c(w),c(D),c(F))};static \u0275cmp=I({type:n,selectors:[["app-enquiry-form"]],decls:13,vars:2,consts:[[1,"rd-container"],[1,"rd-container-header"],[1,"rd-container-header-left"],["type","button","id","back",1,"rd-btn-text","rd-btn-back","rd-btn-lg"],["src","assets/images/arrow-left.svg","alt","Dropdown arrow"],[1,"rd-heading","rd-heading-lg"],[4,"ngIf"],["type","user-form-page-builder"],[3,"uploadfile","deletefile","formSubmit","imageReorder","fields","columns"]],template:function(r,o){r&1&&(m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"button",3)(5,"span"),h(6,"img",4),a(),m(7,"span"),g(8,"BACK"),a()()(),m(9,"div",5),g(10," Add "),a()()(),S(11,L,2,0,"div",6)(12,V,2,2,"div",6),a()),r&2&&(p(11),u("ngIf",o.loadingSkeleton),p(),u("ngIf",!o.loadingSkeleton&&o.columns&&o.fields))},dependencies:[O,T,A,P,R,N],styles:[".form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   .required-asterik[_ngcontent-%COMP%]{color:red;margin-left:.25rem}.form-group[_ngcontent-%COMP%]     rd-autocomplete{width:100%}.form-group[_ngcontent-%COMP%]     rd-autocomplete .ng-select{width:100%;min-height:58px}.form-group[_ngcontent-%COMP%]     rd-autocomplete .ng-select-container{border:1px solid #ccc;border-radius:4px}.rd-btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:8px 16px;border-radius:4px;border:none}"]})};export{q as EnquiryFormComponent};
