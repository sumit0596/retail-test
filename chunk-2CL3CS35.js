import{a as D}from"./chunk-CYK5HLCI.js";import{a as F}from"./chunk-F2AWUHRW.js";import{a as A}from"./chunk-6ZT7OVEF.js";import{c as j}from"./chunk-5DBK4ZXR.js";import"./chunk-7IPKTMG7.js";import"./chunk-23ETMDCW.js";import"./chunk-FQU4EXR4.js";import"./chunk-7GNHLM6X.js";import{$ as k,ba as N}from"./chunk-FLJC444F.js";import{e as v,f as I,g as d}from"./chunk-IPZIKDLO.js";import{p as w}from"./chunk-TBJJFKUM.js";import{Fc as x,Gb as a,Qb as s,Rb as l,Sb as f,V as S,Wb as E,Yb as U,Z as y,Zb as c,ad as T,g,ib as o,jc as R,kd as L,m as C,nb as n,qa as p,ra as u,ub as b,zb as _}from"./chunk-4KZPWME3.js";function P(i,r){i&1&&(s(0,"div"),f(1,"app-skeleton-loader",6),l()),i&2&&(o(),a("type","user-form"))}function V(i,r){if(i&1){let e=E();s(0,"div")(1,"app-dynamic-form",7),U("formSubmit",function(m){p(e);let h=c();return u(h.submitUser(m))})("formCancel",function(){p(e);let m=c();return u(m.cancelUser())}),l()()}if(i&2){let e=c();o(),a("fields",e.fields)("columns",e.createcolumns)("submitButtonText","Create User")("flexiWidth",!0)}}var B=class i{constructor(r,e,t,m,h){this.router=r;this.listingService=e;this.commonService=t;this.toasterService=m;this.cdr=h}createcolumns;loadingSkeleton=!0;today=new Date;roleList$;roleList;backUrl="admin/manage-users";isBuilderValid=!1;fields;destroySubject=new C;ngOnInit(){this.loadingSkeleton=!0,this.initializeFields(),this.getRoles(),this.cdr.detectChanges()}cancelUser(){this.router.navigate([`${v.MANAGE_USER}`])}submitUser(r){this.commonService.post(`${I.USER_REGISTER}`,r).subscribe({next:e=>{this.router.navigateByUrl(`${v.MANAGE_USER}`).then(t=>{this.toasterService.success(e.message)})},complete:()=>{},error:e=>{}})}initializeFields(){this.loadingSkeleton=!0,this.fields=[{type:"text",label:"First Name",name:"FirstName",placeholder:"Enter First Name",value:"",wrapperClass:"col-12 col-md-6",validators:{required:!0,pattern:d.ALPHABETS,maxLength:100,whitespace:!0},id:"firstname"},{type:"text",label:"Last Name",name:"LastName",placeholder:"Enter Last Name",value:"",wrapperClass:"col-12 col-md-6",validators:{required:!0,pattern:d.ALPHABETS,maxLength:100,whitespace:!0},id:"lastname"},{type:"email",label:"Email",name:"Email",placeholder:"Enter Email Address",value:"",wrapperClass:"col-12 col-md-6",id:"email",validators:{required:!0,email:!0}},{type:"tel",label:"Cell number",name:"CellNumber",placeholder:"Enter contact number",value:"",wrapperClass:"col-12 col-md-6",id:"cellnumber",validators:{required:!0,pattern:d.NUMERIC_PLUS_SPACE_PATTERN}},{type:"select",label:"Roles",name:"RoleId",bindLabel:"Name",bindValue:"Id",value:"",options:[],id:"roles",validators:{required:!0},wrapperClass:"col-12 col-md-6",placeholder:"Select Role"}],this.createcolumns=[{value:this.fields}]}getRoles(){return g(this,null,function*(){this.loadingSkeleton=!0,this.roleList$=yield this.listingService.getRoles(),this.roleList$.pipe(y(this.destroySubject),S(1)).subscribe({next:r=>{this.roleList=r;let e=this.fields?.find(t=>t.name==="RoleId");e&&(e.options=this.roleList),setTimeout(()=>{this.loadingSkeleton=!1,this.cdr.markForCheck()},1e3)},error:r=>{this.loadingSkeleton=!1,this.toasterService.error(r.error.message)}})})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete()}static \u0275fac=function(e){return new(e||i)(n(w),n(D),n(N),n(k),n(x))};static \u0275cmp=b({type:i,selectors:[["app-create-user"]],decls:10,vars:3,consts:[[1,"rd-container"],[1,"rd-container-header"],[1,"rd-container-header-left"],[3,"url"],[1,"rd-heading","rd-heading-lg"],[4,"ngIf"],[3,"type"],[3,"formSubmit","formCancel","fields","columns","submitButtonText","flexiWidth"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),f(4,"back-button",3),l(),s(5,"div",4),R(6,"Create User"),l()()(),s(7,"div"),_(8,P,2,1,"div",5)(9,V,2,4,"div",5),l()()),e&2&&(o(4),a("url",t.backUrl),o(4),a("ngIf",t.loadingSkeleton),o(),a("ngIf",!t.loadingSkeleton&&t.createcolumns&&t.fields))},dependencies:[j,L,T,F,A],styles:[".gjs-pn-panel.gjs-pn-views.gjs-one-bg.gjs-two-color{display:table}"]})};export{B as CreateUserComponent};
