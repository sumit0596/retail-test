import{a as T}from"./chunk-7GNHLM6X.js";import{f as s,p as i,q as h}from"./chunk-IPZIKDLO.js";import{b as P,c as d,e as I,f as b}from"./chunk-TBJJFKUM.js";import{a as c,b as u,ca as E,ha as m,n as g,x as l}from"./chunk-4KZPWME3.js";var C=Object.freeze({BANNER_TITLE:"banner-title",POPUP_ID:"POPUP_ID",IMAGE_POPUP_ID:"image_popup_id",SLIDER_CAROUSEL_ID:"slider-carousel"}),A=Object.freeze({LINK:"Link",BUTTON:"Button",IMAGE:"Image",CARDS:"Cardbuilder",ICON:"Icon",LAYOUTS:"Layout",HEADING:"Heading",BANNER:"Banner",TEAM_MEMBER:"TeamMember",INVESTORS_LIST:"InvestorsList",ESG_LIST:"EsgList",PROPERTY_CARD:"PropertiesCard",CAROUSEL:"Carousel",POPUP:"Popup",PREVIEW:"Preview"}),O=Object.freeze({TYPE_ATTR:"data-btn-type",ICON_POSITION_ATTR:"data-leading-icon",SIZE_ATTR:"data-btn-size",LINK_ATTR:"data-btn-link",HREF:"href",TARGET:"target",DOWNLOAD:"download"}),S=Object.freeze({NAME:"data-popup-name",LABEL:"data-popup-label",SIZE:"data-popup-size",IMAGE:"data-popup-image"});var f=class p{constructor(e){this.httpClient=e}page={Title:"",Route:"",Html:"",Css:"",Icon:"",ParentId:0,Portal:0,Status:0};pageSubject=new g(this.page);page$=this.pageSubject.asObservable();editor;searchText="";pageDetails;pageConfig;getPage(){return this.page$}setPage(e){this.pageSubject.next(e)}getMenuList(e,t=!1){let n=`${i.apiBaseUrl}/${s.GET_ALL_MENU_LIST}`,a=new d;a=a.append("Portal",e);let r={params:a};return t&&(r.context=new I().set(T,!0)),this.httpClient.get(n,r).pipe(l(o=>o.data))}getPageList(e){let t=`${i.apiBaseUrl}/${s.GET_PAGES_LIST}`,n=new d;return Object.keys(e).forEach(a=>{let r=e[a];r&&(n=n.append(a,r))}),this.httpClient.get(t,{params:n}).pipe(l(a=>a.data))}getPageDetails(e){let t=`${i.apiBaseUrl}/${s.GET_MENU_DETAILS}/${e}`;return this.httpClient.get(t)}addPage(e){let t=`${i.apiBaseUrl}/${s.ADD_MENU}`;return this.httpClient.post(t,e)}updatePage(e,t){let n=`${i.apiBaseUrl}/${s.UPDATE_MENU}/${t}`,a=new P().set("Content-Type","application/json");return this.httpClient.put(n,e,{headers:a})}searchInput(e){if(i.CUSTOM_COMPONENT_SEARCH){this.searchText=e.target.value.toLowerCase();let t=document.querySelectorAll(".gjs-block"),n=document.querySelectorAll(".gjs-block-category.gjs-open"),a=!1;t.forEach(r=>{let o=r.getAttribute("title").toLowerCase();o&&o.includes(this.searchText)?(r.style.display="block",a=!0):r.style.display="none"}),a?n.forEach(r=>{r.style.display="block"}):n.forEach(r=>{r.style.display="none"})}}addSearchInputField(){if(i.CUSTOM_COMPONENT_SEARCH){let e=document.createElement("div");e.classList.add("search-container"),e.classList.add("component-search-container");let t=document.createElement("input"),n=document.createElement("img");n.setAttribute("src","assets/images/search.svg"),t.setAttribute("type","text"),t.setAttribute("name","search"),t.setAttribute("id","componentSearch"),t.setAttribute("placeholder","Search"),t.addEventListener("input",this.searchInput),e.appendChild(t),e.appendChild(n),setTimeout(()=>{document.querySelector(".gjs-block-categories")?.prepend(e)},3e3)}}setPageBanner(e){let t=this.editor.BlockManager;if(!t.get("rd-banner"))return;let a=t.get("rd-banner").getContent();a&&(a=u(c({},a),{components:[...a.components].map(r=>r&&r.id==C.BANNER_TITLE?u(c({},r),{content:e}):r)}),this.editor.addComponents(a))}uploadMedia(e,t){let n=`${i.apiBaseUrl+s.MEDIA_UPLOAD}`,a=new FormData;return a.append(h.FILE,e,e.name),a.append("Type",JSON.stringify(t)),this.httpClient.post(n,a).pipe(l(r=>r.data))}duplicatePage(e){let t=`${i.apiBaseUrl+s.DUPLICATE_PAGE}`,n=new FormData;return n.append("MenuId",JSON.stringify(e)),this.httpClient.post(t,n)}deletePage(e){let t=`${i.apiBaseUrl+s.DELETE_PAGE}/${e}`;return this.httpClient.delete(t)}getIcons(){return this.httpClient.get("/assets/json/icons.json")}preview(){i.PREVIEW_CHANGES&&this.editor.runCommand("page-preview",{pageDetails:this.pageDetails,pageConfig:this.pageConfig})}static \u0275fac=function(t){return new(t||p)(m(b))};static \u0275prov=E({token:p,factory:p.\u0275fac,providedIn:"root"})};export{C as a,A as b,O as c,S as d,f as e};
