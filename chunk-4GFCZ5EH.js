import{a as T}from"./chunk-CTLQS2KQ.js";import{c as k}from"./chunk-5DBK4ZXR.js";import"./chunk-7IPKTMG7.js";import"./chunk-23ETMDCW.js";import"./chunk-FQU4EXR4.js";import"./chunk-7GNHLM6X.js";import{$ as x,ba as y}from"./chunk-FLJC444F.js";import{e as M,f as d,g as l,o as a,r as S}from"./chunk-IPZIKDLO.js";import{n as P,p as C,q as _,t as O}from"./chunk-TBJJFKUM.js";import{Gb as c,Qb as i,Rb as r,Sb as p,Yb as w,g as u,ia as f,ib as s,kd as b,nb as o,sc as h,ub as v}from"./chunk-4KZPWME3.js";var E=()=>[""],R=class m{constructor(t,e,n,I,g,j,A){this.router=t;this.loginService=e;this.toasterService=n;this.loaderService=I;this.commonService=g;this.userStore=j;this.route=A}user$;userService=f(a);createcolumns;fields=[];userInfo;token;ngOnInit(){this.token=this.route.snapshot.paramMap.get("token"),this.token?this.validateResetPasswordToken():this.toasterService.error("token is required")}sendEmail(t){t.Token=this.token,this.commonService.post(`${d.RESET_PASSWORD}`,t).subscribe({next:e=>{this.toasterService.success(e.message),this.back()},complete:()=>{},error:()=>{}})}validateResetPasswordToken(){return u(this,null,function*(){let t=new FormData;t.append("Token",this.token),this.commonService.post(`${d.RESET_PASSWORD_TOKEN_CHECK}`,t).subscribe({next:e=>{this.userStore.setUser(e.data),this.userInfo=e.data,this.createColumn()},error:e=>{this.createColumn()}})})}back(){this.router.navigate([M.ADMIN_LOGIN])}createColumn(){this.fields=[{type:"password",label:"Create New Password",name:"Password",placeholder:"New Password",wrapperClass:"col-md-12",id:"password",validators:{required:!0,pattern:l.PASSWORD_PATTERN}},{type:"password",label:"Confirm Password",name:"Password_confirmation",placeholder:"Confirm Password",wrapperClass:"col-md-12",id:"Password_confirmation",validators:{required:!0,pattern:l.PASSWORD_PATTERN}}],this.createcolumns=[{id:"col-12 d-flex flex-wrap gap-3 justify-content-center",value:this.fields}]}static \u0275fac=function(e){return new(e||m)(o(C),o(T),o(x),o(S),o(y),o(a),o(P))};static \u0275cmp=v({type:m,selectors:[["app-update-password"]],decls:11,vars:6,consts:[[1,"container-fluid","forgotPassword-section"],[1,"row"],[1,"col-md-6","p-0"],["src","assets/images/user-vector.svg","alt","Login",1,"w-100","vh-100","image-update-passwd-custom"],[1,"col-md-6","h-100","login-form-wrapper"],[1,"d-flex","flex-column","justify-content-center","login-form-container"],[1,"mb-5"],[3,"routerLink"],["src","assets/images/logo.svg","alt","logo"],[3,"formSubmit","fields","columns","submitButtonText","showcancelbutton"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),p(3,"img",3),r(),i(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),p(8,"img",8),r()(),i(9,"div",5)(10,"app-dynamic-form",9),w("formSubmit",function(g){return n.sendEmail(g)}),r()()()()()()),e&2&&(s(7),c("routerLink",h(5,E)),s(3),c("fields",n.fields)("columns",n.createcolumns)("submitButtonText","Save New Password")("showcancelbutton",!1))},dependencies:[k,b,O,_],styles:[".redefine-logo[_ngcontent-%COMP%]{margin-top:58px}.image-redefine[_ngcontent-%COMP%]{margin-top:132px;cursor:pointer}.container-fluid[_ngcontent-%COMP%]{overflow:hidden}.login-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:space-evenly;align-items:center;animation:fadeIn 1.3s}.rd-color-block[_ngcontent-%COMP%]{width:20%;height:15%;position:absolute;left:-10%;background:linear-gradient(90deg,#c00018,#e6001c 50.99%,#aa0015 106.25%);z-index:-1}.login-banner-container[_ngcontent-%COMP%]{position:relative;width:40%;height:90%;background-position:top right;background-repeat:no-repeat;background-size:60%}.login-banner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden}.login-banner[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{position:relative;top:8%;left:55%;width:35%}.login-banner[_ngcontent-%COMP%]   img.people-vector[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;bottom:-20%;left:0;right:0;margin:0 auto}.login-form-container[_ngcontent-%COMP%]{width:100%;max-width:800px;height:100%;padding:0 2%}.greeting-msg[_ngcontent-%COMP%]{margin-bottom:30px}.btn-login[_ngcontent-%COMP%]{position:relative;width:100%;height:40px;margin-top:20px;color:#fff;background-color:#c00018;padding:0 .7rem;border:2px solid transparent;border-radius:3px;font-size:15px;font-weight:600;transition:all .3s}button.btn-login[_ngcontent-%COMP%]:hover{background-color:#aa0015}button.btn-login[_ngcontent-%COMP%]:active, button.btn-login[_ngcontent-%COMP%]:focus{border-color:#e6001c}button.btn-login[_ngcontent-%COMP%]:disabled{pointer-events:none;cursor:none}.signin-loader[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;animation:fadeIn 1.3s}.signin-loader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}.btn-wrapper[_ngcontent-%COMP%]{width:100%;margin:30px 0 20px;display:flex;align-items:center;justify-content:flex-end}.password-input[_ngcontent-%COMP%]{position:relative}.password-policy-icon[_ngcontent-%COMP%]{position:absolute;right:13px;z-index:10}.password-policy-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px}.password-policy-icon[_ngcontent-%COMP%]:hover   .password-policy-tooltip[_ngcontent-%COMP%]{display:block}.password-policy-tooltip[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{color:#000!important}.password-policy-tooltip[_ngcontent-%COMP%]{display:none;position:absolute;top:7px;right:12px;z-index:1;padding:5px 5px 5px 25px;background:#add8e6;width:auto;min-width:240px;font-size:11px;box-shadow:#64646f33 0 7px 29px;background-color:#fff;border-radius:3px;animation:fadeIn .3s ease-in;color:#000!important}.bg-image-vertical[_ngcontent-%COMP%]{position:relative;overflow:hidden;background-repeat:no-repeat;background-position:right center;background-size:auto 100%}button.rd-btn-text[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:14px}.login-form-wrapper[_ngcontent-%COMP%]{overflow:auto}@media (max-width: 768px){  .login-form-wrapper .control-container label{color:var(--white)}.login-bg-container[_ngcontent-%COMP%]{width:100%;position:fixed;z-index:-1}.login-bg-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(.5)}.password-policy-tooltip[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{color:#000!important}.form-wrapper[_ngcontent-%COMP%]{width:100%;color:var(--white)}.btn-wrapper[_ngcontent-%COMP%]   .rd-btn[_ngcontent-%COMP%]{color:var(--white)!important}}.image-update-passwd-custom[_ngcontent-%COMP%]{object-fit:cover;object-position:left}@media (max-width: 576px){.login-form-wrapper[_ngcontent-%COMP%]   .btn-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};export{R as UpdatePasswordComponent};
